brCg3DMh15mXf4Z7PsRbrCg3DMh15mXf4Z7PsRbrCg3DMh15mXf4Z7PsR#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü–µ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä—à–æ–≥–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ –ø–∞—Ä–æ–ª–µ–º

SERVER="root@213.199.43.90"
APP_PATH="/opt/schoola"

echo "üè´ School of Life - –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞"
echo "=========================================="
echo ""
echo "üîê –°–µ—Ä–≤–µ—Ä: $SERVER"
echo "üìÅ –®–ª—è—Ö: $APP_PATH"
echo ""

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
safe_ssh() {
    local command="$1"
    echo "üì° –í–∏–∫–æ–Ω—É—é: $command"
    ssh -o StrictHostKeyChecking=no "$SERVER" "$command"
}

echo "üîç 1. –ü–µ—Ä–µ–≤—ñ—Ä—è—é —ñ—Å–Ω—É—é—á—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ..."
safe_ssh "echo '–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–µ'; echo ''; echo '–ü–æ—Ç–æ—á–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è:'; pwd; echo ''; echo '–ó–∞–ø—É—â–µ–Ω—ñ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏:'; docker ps 2>/dev/null || echo 'Docker –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π'; echo ''; echo '–Ü—Å–Ω—É—é—á—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ –≤ /opt:'; ls -la /opt/ 2>/dev/null || echo '–ü–∞–ø–∫–∞ /opt –ø–æ—Ä–æ–∂–Ω—è'"

echo ""
echo "üõ°Ô∏è 2. –ü–µ—Ä–µ–≤—ñ—Ä—è—é –±–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è..."
safe_ssh "echo '–ü–µ—Ä–µ–≤—ñ—Ä—è—é –ø–æ—Ä—Ç–∏:'; netstat -tlnp | grep -E ':(80|443|8000|5432)' || echo '–ü–æ—Ä—Ç–∏ –≤—ñ–ª—å–Ω—ñ'; echo ''; echo '–ü–µ—Ä–µ–≤—ñ—Ä—è—é –ø—Ä–æ—Ü–µ—Å–∏:'; ps aux | grep -E '(nginx|apache|caddy|postgres)' | grep -v grep || echo '–í–µ–±-—Å–µ—Ä–≤–µ—Ä–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω—ñ'"

echo ""
echo "‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo ""
echo "üöÄ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:"
echo "1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –Ω–µ–º–∞—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –∑ –ø–æ—Ä—Ç–∞–º–∏ 80, 443"
echo "2. –Ø–∫—â–æ –≤—Å–µ –±–µ–∑–ø–µ—á–Ω–æ, –∑–∞–ø—É—Å—Ç—ñ—Ç—å: make bootstrap"
echo "3. –ü–æ—Ç—ñ–º: make ship"
