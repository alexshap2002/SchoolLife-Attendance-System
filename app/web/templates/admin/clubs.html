{% extends "base.html" %}

{% block content %}
<style>
/* –°—Ç–∏–ª—ñ –≥—É—Ä—Ç–∫—ñ–≤ –≤ —Å—Ç–∏–ª—ñ —ñ–Ω—à–∏—Ö —Ç–∞–±–ª–∏—Ü—å */
#clubsTable {
    margin-top: 20px;
}

/* –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —Ä–æ–∑–º—ñ—Ä–∏ –¥–ª—è –∫–æ–ª–æ–Ω–æ–∫ */
#clubsTable th:nth-child(1), #clubsTable td:nth-child(1) { min-width: 150px; } /* –ù–∞–∑–≤–∞ –≥—É—Ä—Ç–∫–∞ */
#clubsTable th:nth-child(2), #clubsTable td:nth-child(2) { min-width: 100px; } /* –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å */
#clubsTable th:nth-child(3), #clubsTable td:nth-child(3) { min-width: 140px; } /* –õ–æ–∫–∞—Ü—ñ—è */
#clubsTable th:nth-child(4), #clubsTable td:nth-child(4) { min-width: 140px; } /* –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è */
#clubsTable th:nth-child(5), #clubsTable td:nth-child(5) { min-width: 120px; } /* –î—ñ—ó */

/* –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑ —è—Å–∫—Ä–∞–≤–∏—Ö –∫–æ–ª—å–æ—Ä—ñ–≤ */
#clubsTable thead th {
    white-space: nowrap;
    padding: 12px 8px;
}

/* –§—ñ–ª—å—Ç—Ä–∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ñ */
#clubsTable .filter-row td {
    padding: 8px 6px;
}

#clubsTable .filter-input,
#clubsTable .filter-select {
    font-size: 0.85rem;
    padding: 4px 8px;
    min-width: 90px;
}

/* –ö–Ω–æ–ø–∫–∏ –¥—ñ–π */
#clubsTable .btn-group .btn {
    margin: 0 1px;
    padding: 4px 8px;
}
</style>

<!-- –î–æ–¥–∞—î–º–æ –≤—ñ–¥—Å—Ç—É–ø –∑–≤–µ—Ä—Ö—É –∑–∞–º—ñ—Å—Ç—å –ø–æ–¥–≤—ñ–π–Ω–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ -->
<div class="mt-4 pt-3"></div>

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>üé≠ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≥—É—Ä—Ç–∫–∞–º–∏</h2>
    <div class="btn-group">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addClubModal">
            <i class="bi bi-plus-circle"></i> –î–æ–¥–∞—Ç–∏ –≥—É—Ä—Ç–æ–∫
        </button>
        <button type="button" class="btn btn-outline-success" onclick="exportClubsExcel()">
            <i class="bi bi-file-earmark-spreadsheet"></i> –ï–∫—Å–ø–æ—Ä—Ç –≤ Excel
        </button>
    </div>
</div>

<div class="card shadow">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover" id="clubsTable">
                <thead id="clubsTableHead">
                    <!-- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±—É–¥—É—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ —á–µ—Ä–µ–∑ JavaScript -->
                </thead>
                <tbody id="clubsTableBody">
                    <!-- –î–∞–Ω—ñ –±—É–¥—É—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —á–µ—Ä–µ–∑ JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="mt-4">
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—É—Ä—Ç–∫—ñ–≤</h5>
                </div>
                <div class="card-body">
                    <p><strong>–í—Å—å–æ–≥–æ –≥—É—Ä—Ç–∫—ñ–≤:</strong> {{ clubs|length }}</p>
                    <p><strong>–°–µ—Ä–µ–¥–Ω—è —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:</strong> 
                        {% if clubs %}
                            {{ (clubs|sum(attribute='duration_min') / clubs|length)|round }} —Ö–≤
                        {% else %}
                            0 —Ö–≤
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">–õ–æ–∫–∞—Ü—ñ—ó</h5>
                </div>
                <div class="card-body">
                    {% set locations = clubs|map(attribute='location')|unique|list %}
                    {% for location in locations %}
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span><i class="bi bi-geo-alt"></i> {{ location }}</span>
                            <span class="badge bg-secondary">
                                {{ clubs|selectattr('location', 'equalto', location)|list|length }}
                            </span>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Club Modal -->
<div class="modal fade" id="addClubModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –≥—É—Ä—Ç–æ–∫</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="addClubForm">
                    <div class="mb-3">
                        <label for="clubName" class="form-label">–ù–∞–∑–≤–∞ –≥—É—Ä—Ç–∫–∞ *</label>
                        <input type="text" class="form-control" id="clubName" name="clubName" required>
                    </div>
                    <div class="mb-3">
                        <label for="duration" class="form-label">–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å (—Ö–≤–∏–ª–∏–Ω–∏) *</label>
                        <input type="number" class="form-control" id="duration" name="duration" min="30" max="180" value="60" required>
                    </div>
                    <div class="mb-3">
                        <label for="location" class="form-label">–õ–æ–∫–∞—Ü—ñ—è *</label>
                        <input type="text" class="form-control" id="location" name="location" placeholder="–ö–∞–±—ñ–Ω–µ—Ç 101" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                <button type="button" class="btn btn-primary" onclick="saveClub()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –≥—É—Ä—Ç–∫—ñ–≤ —Ç–µ–ø–µ—Ä –≤ admin.js -->
{% endblock %}
