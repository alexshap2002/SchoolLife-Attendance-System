{% extends "base.html" %}

{% block content %}
<style>
/* –°—Ç–∏–ª—ñ —É—á–Ω—ñ–≤ –≤ —Å—Ç–∏–ª—ñ —ñ–Ω—à–∏—Ö —Ç–∞–±–ª–∏—Ü—å */
#studentsTable {
    margin-top: 20px;
}

/* STICKY COLUMNS - –§—ñ–∫—Å–æ–≤–∞–Ω—ñ —Å—Ç–æ–≤–ø—Ü—ñ "–Ü–º'—è" —Ç–∞ "–ü—Ä—ñ–∑–≤–∏—â–µ" */
.table-responsive {
    position: relative;
}

/* –§—ñ–∫—Å–∞—Ü—ñ—è –ø–µ—Ä—à–æ–≥–æ —Å—Ç–æ–≤–ø—Ü—è (–Ü–º'—è) */
#studentsTable th:nth-child(1), 
#studentsTable td:nth-child(1) { 
    position: sticky;
    left: 0;
    z-index: 10;
    background-color: #ffffff;
    width: 120px;
    min-width: 120px;
    max-width: 120px;
    box-shadow: 2px 0 5px rgba(0,0,0,0.1); /* —Ç—ñ–Ω—å —Å–ø—Ä–∞–≤–∞ */
    border-right: 1px solid #dee2e6; /* –ª–µ–≥–∫–∞ –º–µ–∂–∞ */
}

/* –§—ñ–∫—Å–∞—Ü—ñ—è –¥—Ä—É–≥–æ–≥–æ —Å—Ç–æ–≤–ø—Ü—è (–ü—Ä—ñ–∑–≤–∏—â–µ) */
#studentsTable th:nth-child(2), 
#studentsTable td:nth-child(2) { 
    position: sticky;
    left: 120px; /* –∑–º—ñ—â–µ–Ω–Ω—è –Ω–∞ —à–∏—Ä–∏–Ω—É –ø–µ—Ä—à–æ–≥–æ —Å—Ç–æ–≤–ø—Ü—è */
    z-index: 10;
    background-color: #ffffff;
    width: 140px;
    min-width: 140px;
    max-width: 140px;
    box-shadow: 2px 0 5px rgba(0,0,0,0.1); /* —Ç—ñ–Ω—å —Å–ø—Ä–∞–≤–∞ */
    border-right: 2px solid #007bff; /* —Å–∏–Ω—è –º–µ–∂–∞ –¥–ª—è –∫—Ä–∞—â–æ—ó –≤–∏–¥–∏–º–æ—Å—Ç—ñ */
}

/* –ó–∞–≥–æ–ª–æ–≤–∫–∏ sticky —Å—Ç–æ–≤–ø—Ü—ñ–≤ –º–∞—é—Ç—å –≤–∏—â–∏–π z-index */
#studentsTable thead th:nth-child(1),
#studentsTable thead th:nth-child(2) {
    z-index: 11;
    background-color: #f8f9fa; /* —Ç—Ä–æ—Ö–∏ —Å—ñ—Ä–∏–π —Ñ–æ–Ω –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ */
}

/* –§—ñ–ª—å—Ç—Ä–∏ –≤ sticky —Å—Ç–æ–≤–ø—Ü—è—Ö */
#studentsTable .filter-row td:nth-child(1),
#studentsTable .filter-row td:nth-child(2) {
    background-color: #f8f9fa;
    z-index: 10;
}

/* –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —Ä–æ–∑–º—ñ—Ä–∏ –¥–ª—è —ñ–Ω—à–∏—Ö –∫–æ–ª–æ–Ω–æ–∫ */
#studentsTable th:nth-child(3), #studentsTable td:nth-child(3) { min-width: 140px; } /* –î–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è */
#studentsTable th:nth-child(4), #studentsTable td:nth-child(4) { min-width: 80px; }  /* –í—ñ–∫ */
#studentsTable th:nth-child(5), #studentsTable td:nth-child(5) { min-width: 80px; }  /* –ö–ª–∞—Å */
#studentsTable th:nth-child(6), #studentsTable td:nth-child(6) { min-width: 140px; } /* –¢–µ–ª–µ—Ñ–æ–Ω –¥–∏—Ç–∏–Ω–∏ */
#studentsTable th:nth-child(7), #studentsTable td:nth-child(7) { min-width: 180px; } /* –ü–Ü–ë –º–∞—Ç–µ—Ä—ñ */
#studentsTable th:nth-child(8), #studentsTable td:nth-child(8) { min-width: 140px; } /* –¢–µ–ª–µ—Ñ–æ–Ω –º–∞—Ç–µ—Ä—ñ */
#studentsTable th:nth-child(9), #studentsTable td:nth-child(9) { min-width: 180px; } /* –ü–Ü–ë –±–∞—Ç—å–∫–∞ */
#studentsTable th:nth-child(10), #studentsTable td:nth-child(10) { min-width: 140px; } /* –¢–µ–ª–µ—Ñ–æ–Ω –±–∞—Ç—å–∫–∞ */

/* –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑ —è—Å–∫—Ä–∞–≤–∏—Ö –∫–æ–ª—å–æ—Ä—ñ–≤ */
#studentsTable thead th {
    white-space: nowrap;
    padding: 12px 8px;
}

/* –§—ñ–ª—å—Ç—Ä–∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ñ */
#studentsTable .filter-row td {
    padding: 8px 6px;
}

#studentsTable .filter-input,
#studentsTable .filter-select {
    font-size: 0.85rem;
    padding: 4px 8px;
    min-width: 90px;
}

/* –°—Ç–∞—Ç—É—Å–∏ –≥—É—Ä—Ç–∫—ñ–≤ - —Ü–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è –≤–∂–µ —î –≤ –±–∞–∑–æ–≤–∏—Ö —Å—Ç–∏–ª—è—Ö */
#studentsTable .club-status {
    font-size: 1.1rem;
}

/* –ö–Ω–æ–ø–∫–∏ –¥—ñ–π */
#studentsTable .btn-group .btn {
    margin: 0 1px;
    padding: 4px 8px;
}

/* –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Å—Ç–∏–ª—ñ –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è sticky —Å—Ç–æ–≤–ø—Ü—ñ–≤ */
#studentsTable tbody tr:hover td:nth-child(1),
#studentsTable tbody tr:hover td:nth-child(2) {
    background-color: #f1f3f4 !important; /* —Å–≤—ñ—Ç–ª–æ-—Å—ñ—Ä–∏–π –ø—Ä–∏ hover */
}

/* –û–±—Ä—ñ–∑–∫–∞ —Ç–µ–∫—Å—Ç—É –≤ sticky —Å—Ç–æ–≤–ø—Ü—è—Ö —è–∫—â–æ –∑–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–∏–π */
#studentsTable td:nth-child(1),
#studentsTable td:nth-child(2) {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 8px 6px;
    font-weight: 500; /* —Ç—Ä–æ—Ö–∏ –∂–∏—Ä–Ω—ñ—à–∏–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫—Ä–∞—â–æ—ó –≤–∏–¥–∏–º–æ—Å—Ç—ñ */
}

/* –ü—ñ–¥–∫–∞–∑–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ –Ω–∞ –æ–±—Ä—ñ–∑–∞–Ω–∏–π —Ç–µ–∫—Å—Ç */
#studentsTable td:nth-child(1)[title],
#studentsTable td:nth-child(2)[title] {
    cursor: help;
}

/* –í—ñ–∑—É–∞–ª—å–Ω–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä —â–æ —Å—Ç–æ–≤–ø—Ü—ñ –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ */
#studentsTable th:nth-child(1):after {
    content: " üìå";
    font-size: 0.8em;
    opacity: 0.6;
}

#studentsTable th:nth-child(2):after {
    content: " üìå";
    font-size: 0.8em;
    opacity: 0.6;
}

/* STICKY SCROLLBAR - –ü–ª–∞–≤–∞—é—á–∏–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏–π —Å–∫—Ä–æ–ª–±–∞—Ä */
.sticky-scrollbar-container {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    background: rgba(0, 0, 0, 0.9);
    border-radius: 25px;
    padding: 10px 20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    max-width: 80vw;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.sticky-scrollbar-container.visible {
    opacity: 1;
    visibility: visible;
}

.sticky-scrollbar {
    width: 300px;
    height: 8px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
    position: relative;
    cursor: pointer;
}

.sticky-scrollbar-thumb {
    height: 100%;
    background: #007bff;
    border-radius: 4px;
    position: absolute;
    top: 0;
    left: 0;
    min-width: 20px;
    transition: background-color 0.2s ease;
}

.sticky-scrollbar-thumb:hover {
    background: #0056b3;
}

.sticky-scrollbar-label {
    color: white;
    font-size: 0.75rem;
    margin-bottom: 5px;
    text-align: center;
    font-weight: 500;
}

/* –î–æ–¥–∞—Ç–∫–æ–≤–µ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–±–∞—Ä–∞ */
.table-responsive::-webkit-scrollbar {
    height: 12px;
}

.table-responsive::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 6px;
}

.table-responsive::-webkit-scrollbar-thumb {
    background: #007bff;
    border-radius: 6px;
}

.table-responsive::-webkit-scrollbar-thumb:hover {
    background: #0056b3;
}

/* Responsive –¥–∏–∑–∞–π–Ω –¥–ª—è sticky scrollbar */
@media (max-width: 768px) {
    .sticky-scrollbar-container {
        bottom: 10px;
        padding: 8px 15px;
        max-width: 90vw;
    }
    
    .sticky-scrollbar {
        width: 250px;
    }
    
    .sticky-scrollbar-label {
        font-size: 0.7rem;
    }
}

@media (max-width: 480px) {
    .sticky-scrollbar {
        width: 200px;
    }
    
    .sticky-scrollbar-container {
        padding: 6px 12px;
    }
}

/* –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω–¥–∏–∫–∞—Ü—ñ—è —â–æ scrollbar –∞–∫—Ç–∏–≤–Ω–∏–π */
.sticky-scrollbar-container.visible {
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from {
        transform: translateX(-50%) translateY(20px);
        opacity: 0;
    }
    to {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
    }
}
</style>

<!-- –î–æ–¥–∞—î–º–æ –≤—ñ–¥—Å—Ç—É–ø –∑–≤–µ—Ä—Ö—É –∑–∞–º—ñ—Å—Ç—å –ø–æ–¥–≤—ñ–π–Ω–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ -->
<div class="mt-4 pt-3"></div>

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2>üë• –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —É—á–Ω—è–º–∏</h2>
        <small class="text-muted">
            üìå –°—Ç–æ–≤–ø—Ü—ñ "–Ü–º'—è" —Ç–∞ "–ü—Ä—ñ–∑–≤–∏—â–µ" –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—á—É–≤–∞–Ω–Ω—ñ
        </small>
    </div>
    <div class="btn-group" role="group">
        <!-- –ö–Ω–æ–ø–∫–∞ —ñ–º–ø–æ—Ä—Ç—É –∑ –≤–∏–ø–∞–¥–∞—é—á–∏–º –º–µ–Ω—é -->
        <div class="dropdown">
            <button class="btn btn-outline-success dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-cloud-upload"></i> –Ü–º–ø–æ—Ä—Ç —É—á–Ω—ñ–≤
            </button>
            <ul class="dropdown-menu">
                <li>
                    <a class="dropdown-item" href="#" onclick="downloadStudentsTemplate()">
                        <i class="bi bi-download"></i> –°–∫–∞—á–∞—Ç–∏ —à–∞–±–ª–æ–Ω Excel
                    </a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                    <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#importStudentsModal">
                        <i class="bi bi-cloud-upload"></i> –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ —É—á–Ω—ñ–≤
                    </a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                    <a class="dropdown-item" href="#" onclick="exportStudentsExcel()">
                        <i class="bi bi-file-earmark-spreadsheet"></i> –ï–∫—Å–ø–æ—Ä—Ç –≤ Excel (–ø–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è)
                    </a>
                </li>
            </ul>
        </div>
        <!-- –ó–≤–∏—á–∞–π–Ω–∞ –∫–Ω–æ–ø–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addStudentModal">
            <i class="bi bi-plus-circle"></i> –î–æ–¥–∞—Ç–∏ —É—á–Ω—è
        </button>
        <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–≤–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó -->
        <button type="button" class="btn btn-outline-info" onclick="showFullInfoHelp()">
            <i class="bi bi-person-lines-fill"></i> –ü–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
        </button>
    </div>
</div>


<div class="card shadow">
    <div class="card-body">
        <div class="table-responsive" id="studentsTableContainer">
            <table class="table table-hover" id="studentsTable">
                <thead id="studentsTableHead">
                    <!-- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±—É–¥—É—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ —á–µ—Ä–µ–∑ JavaScript -->
                </thead>
                <tbody id="studentsTableBody">
                    <!-- –î–∞–Ω—ñ –±—É–¥—É—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —á–µ—Ä–µ–∑ JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Add Student Modal -->
<div class="modal fade" id="addStudentModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–æ–≥–æ —É—á–Ω—è</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="addStudentForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="firstName" class="form-label">–Ü–º'—è *</label>
                                <input type="text" class="form-control" id="firstName" name="firstName" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="lastName" class="form-label">–ü—Ä—ñ–∑–≤–∏—â–µ *</label>
                                <input type="text" class="form-control" id="lastName" name="lastName" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="birthDate" class="form-label">–î–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</label>
                                <input type="date" class="form-control" id="birthDate" name="birthDate">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="age" class="form-label">–í—ñ–∫</label>
                                <input type="number" class="form-control" id="age" name="age" min="5" max="18">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="grade" class="form-label">–ö–ª–∞—Å</label>
                                <input type="text" class="form-control" id="grade" name="grade">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="phoneChild" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω –¥–∏—Ç–∏–Ω–∏</label>
                                <input type="tel" class="form-control" id="phoneChild" name="phoneChild" 
                                       pattern="[+]?[0-9]{10,15}" title="–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (–º—ñ–Ω—ñ–º—É–º 10 —Ü–∏—Ñ—Ä)" 
                                       placeholder="+380501234567">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="location" class="form-label">–ú—ñ—Å—Ü–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–Ω—è</label>
                                <input type="text" class="form-control" id="location" name="location">
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="address" class="form-label">–ê–¥—Ä–µ—Å–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–Ω—è</label>
                        <textarea class="form-control" id="address" name="address" rows="2"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="parentName" class="form-label">–ü–Ü–ë –±–∞—Ç—å–∫—ñ–≤</label>
                        <input type="text" class="form-control" id="parentName" name="parentName">
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="fatherName" class="form-label">–ü–Ü–ë –±–∞—Ç—å–∫–∞</label>
                                <input type="text" class="form-control" id="fatherName" name="fatherName">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="motherName" class="form-label">–ü–Ü–ë –º–∞—Ç–µ—Ä—ñ</label>
                                <input type="text" class="form-control" id="motherName" name="motherName">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="phoneMother" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω –º–∞—Ç–µ—Ä—ñ</label>
                                <input type="tel" class="form-control" id="phoneMother" name="phoneMother"
                                       pattern="[+]?[0-9]{10,15}" title="–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (–º—ñ–Ω—ñ–º—É–º 10 —Ü–∏—Ñ—Ä)" 
                                       placeholder="+380501234567">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="phoneFather" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω –±–∞—Ç—å–∫–∞</label>
                                <input type="tel" class="form-control" id="phoneFather" name="phoneFather"
                                       pattern="[+]?[0-9]{10,15}" title="–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (–º—ñ–Ω—ñ–º—É–º 10 —Ü–∏—Ñ—Ä)" 
                                       placeholder="+380501234567">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="settlementType" class="form-label">–¢–∏–ø –Ω–∞—Å–µ–ª–µ–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É</label>
                                <select class="form-control" id="settlementType" name="settlementType">
                                    <option value="">–û–±–µ—Ä—ñ—Ç—å —Ç–∏–ø</option>
                                    <option value="–°–µ–ª–æ">–°–µ–ª–æ</option>
                                    <option value="–°–ú–¢">–°–ú–¢</option>
                                    <option value="–ú—ñ—Å—Ç–æ">–ú—ñ—Å—Ç–æ</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="benefitOther" class="form-label">–Ü–Ω—à—ñ –ø—ñ–ª—å–≥–∏ —Ç–∞ –ø—Ä–∏–º—ñ—Ç–∫–∏</label>
                                <input type="text" class="form-control" id="benefitOther" name="benefitOther">
                            </div>
                        </div>
                    </div>
                    
                    <!-- –°–µ–∫—Ü—ñ—è –ø—ñ–ª—å–≥ -->
                    <div class="mb-3">
                        <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ —Ç–∞ –ø—ñ–ª—å–≥–∏</label>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="benefitLowIncome" name="benefitLowIncome">
                                    <label class="form-check-label" for="benefitLowIncome">
                                        –ú–∞–ª–æ–∑–∞–±–µ–∑–ø–µ—á–µ–Ω—ñ
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="benefitLargeFamily" name="benefitLargeFamily">
                                    <label class="form-check-label" for="benefitLargeFamily">
                                        –ë–∞–≥–∞—Ç–æ–¥—ñ—Ç–Ω—ñ
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="benefitMilitaryFamily" name="benefitMilitaryFamily">
                                    <label class="form-check-label" for="benefitMilitaryFamily">
                                        –°—ñ–º'—è –ó–°–£
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="benefitInternallyDisplaced" name="benefitInternallyDisplaced">
                                    <label class="form-check-label" for="benefitInternallyDisplaced">
                                        –í–ü–û (–≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ –ø–µ—Ä–µ–º—ñ—â–µ–Ω—ñ –æ—Å–æ–±–∏)
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="benefitOrphan" name="benefitOrphan">
                                    <label class="form-check-label" for="benefitOrphan">
                                        –°–∏—Ä–æ—Ç–∞/–Ω–∞–ø—ñ–≤—Å–∏—Ä–æ—Ç–∞/–ø—ñ–¥ –æ–ø—ñ–∫–æ—é
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="benefitDisability" name="benefitDisability">
                                    <label class="form-check-label" for="benefitDisability">
                                        –î–∏—Ç–∏–Ω–∞ –∑ —ñ–Ω–≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—é
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="benefitSocialRisk" name="benefitSocialRisk">
                                    <label class="form-check-label" for="benefitSocialRisk">
                                        –°–ñ–û (—Å–æ—Ü—ñ–∞–ª—å–Ω–∏–π —Ä–∏–∑–∏–∫)
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                <button type="button" class="btn btn-primary" onclick="saveStudent()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
            </div>
        </div>
    </div>
</div>

<!-- Edit Student Modal -->
<div class="modal fade" id="editStudentModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —É—á–Ω—è</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="editStudentForm">
                    <input type="hidden" id="editStudentId">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editFirstName" class="form-label">–Ü–º'—è *</label>
                                <input type="text" class="form-control" id="editFirstName" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editLastName" class="form-label">–ü—Ä—ñ–∑–≤–∏—â–µ *</label>
                                <input type="text" class="form-control" id="editLastName" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editBirthDate" class="form-label">–î–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</label>
                                <input type="date" class="form-control" id="editBirthDate">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="editAge" class="form-label">–í—ñ–∫</label>
                                <input type="number" class="form-control" id="editAge" min="5" max="18">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="editGrade" class="form-label">–ö–ª–∞—Å</label>
                                <input type="text" class="form-control" id="editGrade">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editPhoneChild" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω –¥–∏—Ç–∏–Ω–∏</label>
                                <input type="tel" class="form-control" id="editPhoneChild"
                                       pattern="[+]?[0-9]{10,15}" title="–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (–º—ñ–Ω—ñ–º—É–º 10 —Ü–∏—Ñ—Ä)" 
                                       placeholder="+380501234567">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editLocation" class="form-label">–ú—ñ—Å—Ü–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–Ω—è</label>
                                <input type="text" class="form-control" id="editLocation">
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="editAddress" class="form-label">–ê–¥—Ä–µ—Å–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–Ω—è</label>
                        <textarea class="form-control" id="editAddress" rows="2"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="editParentName" class="form-label">–ü–Ü–ë –±–∞—Ç—å–∫—ñ–≤</label>
                        <input type="text" class="form-control" id="editParentName">
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editFatherName" class="form-label">–ü–Ü–ë –±–∞—Ç—å–∫–∞</label>
                                <input type="text" class="form-control" id="editFatherName">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editMotherName" class="form-label">–ü–Ü–ë –º–∞—Ç–µ—Ä—ñ</label>
                                <input type="text" class="form-control" id="editMotherName">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editPhoneMother" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω –º–∞—Ç–µ—Ä—ñ</label>
                                <input type="tel" class="form-control" id="editPhoneMother"
                                       pattern="[+]?[0-9]{10,15}" title="–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (–º—ñ–Ω—ñ–º—É–º 10 —Ü–∏—Ñ—Ä)" 
                                       placeholder="+380501234567">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editPhoneFather" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω –±–∞—Ç—å–∫–∞</label>
                                <input type="tel" class="form-control" id="editPhoneFather"
                                       pattern="[+]?[0-9]{10,15}" title="–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (–º—ñ–Ω—ñ–º—É–º 10 —Ü–∏—Ñ—Ä)" 
                                       placeholder="+380501234567">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editSettlementType" class="form-label">–¢–∏–ø –Ω–∞—Å–µ–ª–µ–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É</label>
                                <select class="form-control" id="editSettlementType">
                                    <option value="">–û–±–µ—Ä—ñ—Ç—å —Ç–∏–ø</option>
                                    <option value="–°–µ–ª–æ">–°–µ–ª–æ</option>
                                    <option value="–°–ú–¢">–°–ú–¢</option>
                                    <option value="–ú—ñ—Å—Ç–æ">–ú—ñ—Å—Ç–æ</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="editBenefitOther" class="form-label">–Ü–Ω—à—ñ –ø—ñ–ª—å–≥–∏ —Ç–∞ –ø—Ä–∏–º—ñ—Ç–∫–∏</label>
                                <input type="text" class="form-control" id="editBenefitOther">
                            </div>
                        </div>
                    </div>
                    
                    <!-- –°–µ–∫—Ü—ñ—è –ø—ñ–ª—å–≥ -->
                    <div class="mb-3">
                        <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ —Ç–∞ –ø—ñ–ª—å–≥–∏</label>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="editBenefitLowIncome">
                                    <label class="form-check-label" for="editBenefitLowIncome">
                                        –ú–∞–ª–æ–∑–∞–±–µ–∑–ø–µ—á–µ–Ω—ñ
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="editBenefitLargeFamily">
                                    <label class="form-check-label" for="editBenefitLargeFamily">
                                        –ë–∞–≥–∞—Ç–æ–¥—ñ—Ç–Ω—ñ
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="editBenefitMilitaryFamily">
                                    <label class="form-check-label" for="editBenefitMilitaryFamily">
                                        –°—ñ–º'—è –ó–°–£
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="editBenefitInternallyDisplaced">
                                    <label class="form-check-label" for="editBenefitInternallyDisplaced">
                                        –í–ü–û (–≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ –ø–µ—Ä–µ–º—ñ—â–µ–Ω—ñ –æ—Å–æ–±–∏)
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="editBenefitOrphan">
                                    <label class="form-check-label" for="editBenefitOrphan">
                                        –°–∏—Ä–æ—Ç–∞/–Ω–∞–ø—ñ–≤—Å–∏—Ä–æ—Ç–∞/–ø—ñ–¥ –æ–ø—ñ–∫–æ—é
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="editBenefitDisability">
                                    <label class="form-check-label" for="editBenefitDisability">
                                        –î–∏—Ç–∏–Ω–∞ –∑ —ñ–Ω–≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—é
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="editBenefitSocialRisk">
                                    <label class="form-check-label" for="editBenefitSocialRisk">
                                        –°–ñ–û (—Å–æ—Ü—ñ–∞–ª—å–Ω–∏–π —Ä–∏–∑–∏–∫)
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                <button type="button" class="btn btn-primary" onclick="updateStudent()">–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>
            </div>
        </div>
    </div>
</div>

<!-- Import Students Modal -->
<div class="modal fade" id="importStudentsModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">–Ü–º–ø–æ—Ä—Ç —É—á–Ω—ñ–≤ –∑ Excel —Ñ–∞–π–ª—É</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-info">
                    <h6><i class="bi bi-info-circle"></i> –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:</h6>
                    <ul class="mb-0">
                        <li>–°–∫–∞—á–∞–π—Ç–µ —à–∞–±–ª–æ–Ω Excel —Ñ–∞–π–ª—É</li>
                        <li>–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –π–æ–≥–æ –¥–∞–Ω–∏–º–∏ —É—á–Ω—ñ–≤</li>
                        <li>–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π —Ñ–∞–π–ª –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —ñ–º–ø–æ—Ä—Ç—É</li>
                        <li>–í—Å—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ</li>
                    </ul>
                </div>
                
                <form id="importStudentsForm" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="excelFile" class="form-label">–í–∏–±–µ—Ä—ñ—Ç—å Excel —Ñ–∞–π–ª *</label>
                        <input type="file" class="form-control" id="excelFile" name="excelFile" 
                               accept=".xlsx,.xls" required>
                        <div class="form-text">–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏: .xlsx, .xls</div>
                    </div>
                    
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="skipDuplicates" name="skipDuplicates" checked>
                            <label class="form-check-label" for="skipDuplicates">
                                –ü—Ä–æ–ø—É—Å–∫–∞—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç–∏ (–ø–æ —ñ–º–µ–Ω—ñ —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â—É)
                            </label>
                        </div>
                    </div>
                </form>
                
                <!-- –ü—Ä–æ–≥—Ä–µ—Å —ñ–º–ø–æ—Ä—Ç—É -->
                <div id="importProgress" style="display: none;">
                    <div class="progress mb-3">
                        <div class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div id="importStatus" class="text-muted"></div>
                </div>
                
                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —ñ–º–ø–æ—Ä—Ç—É -->
                <div id="importResults" style="display: none;">
                    <div class="alert alert-success">
                        <h6><i class="bi bi-check-circle"></i> –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —ñ–º–ø–æ—Ä—Ç—É:</h6>
                        <div id="importSummary"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                <button type="button" class="btn btn-outline-primary" onclick="downloadStudentsTemplate()">
                    <i class="bi bi-download"></i> –°–∫–∞—á–∞—Ç–∏ —à–∞–±–ª–æ–Ω
                </button>
                <button type="button" class="btn btn-success" onclick="importStudents()" id="importBtn">
                    <i class="bi bi-cloud-upload"></i> –Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏
                </button>
            </div>
        </div>
    </div>
</div>

<!-- –ü–ª–∞–≤–∞—é—á–∏–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏–π —Å–∫—Ä–æ–ª–±–∞—Ä -->
<div class="sticky-scrollbar-container" id="stickyScrollbar">
    <div class="sticky-scrollbar-label">üìä –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ñ</div>
    <div class="sticky-scrollbar" id="stickyScrollbarTrack">
        <div class="sticky-scrollbar-thumb" id="stickyScrollbarThumb"></div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<!-- JavaScript —Ñ—É–Ω–∫—Ü—ñ—ó —Ç–µ–ø–µ—Ä –≤ admin.js -->
{% endblock %}
